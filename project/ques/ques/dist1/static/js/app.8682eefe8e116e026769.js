webpackJsonp([1],{"2jw9":function(t,e){},"3l3h":function(t,e){},IqmP:function(t,e){},IupX:function(t,e){},L55C:function(t,e){},"Lg+t":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},s,!1,function(t){a("yGYl")},null,null).exports,o=a("/ocq"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"index"}},[a("el-container",[a("el-header",{attrs:{height:""}},[a("img",{attrs:{src:"/static/logo.png"}}),t._v(" "),a("span",[t._v("随堂问卷管理系统")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.logout}},[t._v("\r\n                注销  ["+t._s(t.username)+"]\r\n            ")])],1),t._v(" "),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{attrs:{"default-active":"/index",router:!0}},[t._l(t.menusList,function(e){return[0==e.children.length?a("el-menu-item",{key:e.sort,attrs:{index:e.url}},[a("i",{class:e.icon}),t._v(" "+t._s(e.text)+"\r\n                        ")]):t._e(),t._v(" "),e.children.length>0?a("el-submenu",{key:e.sort,attrs:{index:e.url}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{class:e.icon}),t._v("\r\n                                "+t._s(e.text)+"\r\n                            ")]),t._v(" "),t._l(e.children,function(e){return a("el-menu-item",{key:e.sort,attrs:{index:e.url}},[a("i",{class:e.icon}),t._v(" "+t._s(e.text)+"\r\n                            ")])})],2):t._e()]})],2)],1),t._v(" "),a("el-main",{attrs:{height:""}},[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]},l=a("VU/8")({data:function(){return{menusList:[],username:""}},created:function(){var t=this;this.getMenusList(),this.$root.$on("getMenusList",function(){t.getMenusList()})},methods:{logout:function(){var t=this;this.$http.get("/users/logout").then(function(e){t.$router.push("/login")})},getMenusList:function(){var t=this;this.treeLoading=!0,this.$http.get("/menus/list?status=1").then(function(e){t.treeLoading=!1,e.data.error>0&&4==e.data.error?t.$router.push("/login"):(t.menusList=t.$tree(e.data.data),t.$http.get("/users/one").then(function(e){t.username=e.data.data.username}))})}}},r,!1,null,null,null).exports,c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login"}},[a("el-card",{staticClass:"card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("img",{attrs:{src:"/static/logo.png"}}),t._v(" "),a("span",[t._v("登录")])]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.formLoginData,"label-width":"80px",rules:t.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:t.formLoginData.username,callback:function(e){t.$set(t.formLoginData,"username",e)},expression:"formLoginData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.formLoginData.password,callback:function(e){t.$set(t.formLoginData,"password",e)},expression:"formLoginData.password"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")]),t._v(" "),a("router-link",{attrs:{to:"/regist"}},[a("el-button",{staticClass:"success",attrs:{type:"success"}},[t._v("注册")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")({data:function(){return{formLoginData:{username:"",password:""},rules:{username:{required:!0,message:"用户名必须填写",trigger:"blur"},password:{required:!0,message:"密码必须填写",trigger:"blur"}}}},methods:{login:function(){var t=this;this.$http.post("/users/login",this.$qs.stringify(this.formLoginData)).then(function(e){0==e.data.error?t.$router.push("/index"):t.$message.error("用户名或密码错误!")})}}},c,!1,function(t){a("tZws")},"data-v-57abab28",null).exports,u=a("mw3O"),p=a.n(u),m={data:function(){var t=this;return{formLoginData:{username:"",password:"",password2:"",email:"",phone:""},rules:{username:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("用户名不能为空"));break;case!/^[a-zA-Z]\w{3,14}$/.test(e):a(new Error("用户名长度为4到15位大小写字母"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/users/isexist?fieldname=username&fieldvalue="+a).then(function(e){0==e.data.error||t.oldusername==a?i():i(new Error("用户名已存在,请重新输入"))})},trigger:"blur"}],password:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("密码不能为空"));break;default:a()}}},{validator:function(t,e,a){/^.{6,15}$/.test(e)?a():a(new Error("密码长度为6到15位任意组合"))},trigger:"blur"}],password2:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("确认密码不能为空"));break;default:a()}}},{validator:function(e,a,i){a!==t.formLoginData.password?i(new Error("两次密码不一致,请重新输入")):i()},trigger:"change"}],email:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("邮箱不能为空"));break;default:a()}}},{validator:function(t,e,a){/^\w+@\w+(\.(com|cn|net|org|edu)){1,2}$/g.test(e)?a():a(new Error("邮箱格式不正确,请重新输入"))},trigger:"change"}],phone:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("手机不能为空"));break;default:a()}}},{validator:function(t,e,a){/^((13|18)(\d{9}))$|^(14[57]\d{8})$|^(17[07]\d{8})$|(^15[0-35-9]\d{8}$)/.test(e)?a():a(new Error("手机号输入不正确,请重新输入"))},trigger:"change"}]}}},created:function(){},methods:{regist:function(){var t=this;this.$refs.formLogin.validate(function(e){e&&t.$http.post("/users/add",p.a.stringify(t.formLoginData)).then(function(e){t.$router.push("/login"),console.log(e.data)})})},getUsersList:function(){this.$http.get("/users/list").then(function(t){console.log(t.data.data)})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"regist"}},[a("el-card",{staticClass:"card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("img",{attrs:{src:"/static/logo.png"}}),t._v(" "),a("span",[t._v("注册")])]),t._v(" "),a("el-form",{ref:"formLogin",attrs:{model:t.formLoginData,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:t.formLoginData.username,callback:function(e){t.$set(t.formLoginData,"username",e)},expression:"formLoginData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.formLoginData.password,callback:function(e){t.$set(t.formLoginData,"password",e)},expression:"formLoginData.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[a("el-input",{attrs:{type:"password"},model:{value:t.formLoginData.password2,callback:function(e){t.$set(t.formLoginData,"password2",e)},expression:"formLoginData.password2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:t.formLoginData.email,callback:function(e){t.$set(t.formLoginData,"email",e)},expression:"formLoginData.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{model:{value:t.formLoginData.phone,callback:function(e){t.$set(t.formLoginData,"phone",e)},expression:"formLoginData.phone"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.regist}},[t._v("注册")]),t._v(" "),a("router-link",{attrs:{to:"/login"}},[a("el-button",{staticClass:"success",attrs:{type:"success"}},[t._v("已有账号")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,f,!1,function(t){a("L55C")},"data-v-a9060914",null).exports,v={data:function(){return{status:1,rules:{text:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^.{2,18}$/.test(e):a(new Error("名称必须在2-18位之间!"));break;default:a()}}}],url:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^(\/\w+)+$/.test(e):a(new Error("格式不正确,请重新输入!"));break;default:a()}}}]},btnStatus:!0,treeLoading:!1,buttonOkIcon:"",buttonDisabled:!1,dialogTitle:"",dialogVisible:!1,menusList:[],formData:{text:"",icon:"",url:"",pid:0},icons:["el-icon-info","el-icon-error","el-icon-success","el-icon-warning","el-icon-question","el-icon-back","el-icon-arrow-left","el-icon-arrow-down","el-icon-arrow-right","el-icon-arrow-up","el-icon-caret-left","el-icon-caret-bottom","el-icon-caret-top","el-icon-caret-right","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-minus","el-icon-plus","el-icon-remove","el-icon-circle-plus","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-close","el-icon-check","el-icon-circle-close","el-icon-circle-check","el-icon-circle-close-outline","el-icon-circle-check-outline","el-icon-zoom-out","el-icon-zoom-in","el-icon-d-caret","el-icon-sort","el-icon-sort-down","el-icon-sort-up","el-icon-tickets","el-icon-document","el-icon-goods","el-icon-sold-out","el-icon-news","el-icon-message","el-icon-date","el-icon-printer","el-icon-time","el-icon-bell","el-icon-mobile-phone","el-icon-service","el-icon-view","el-icon-menu","el-icon-more","el-icon-more-outline","el-icon-star-on","el-icon-star-off","el-icon-location","el-icon-location-outline","el-icon-phone","el-icon-phone-outline","el-icon-picture","el-icon-picture-outline","el-icon-delete","el-icon-search","el-icon-edit","el-icon-edit-outline","el-icon-rank","el-icon-refresh","el-icon-share","el-icon-setting","el-icon-upload","el-icon-upload2","el-icon-download","el-icon-loading"]}},created:function(){this.getMenusList()},methods:{setStatus:function(t){var e=this;this.$http.get("/menus/status",{params:{id:t.id,status:t.status}}).then(function(){e.$root.$emit("getMenusList")})},sort:function(t,e,a){var i=this;this.$http.post("/menus/sort",this.$qs.stringify({id:t,dir:e,sort:a})).then(function(){i.getMenusList(),i.$root.$emit("getMenusList")})},getMenusList:function(){var t=this;this.treeLoading=!0,this.$http.get("/menus/list").then(function(e){t.treeLoading=!1,e.data.error>0&&4==e.data.error?t.$router.push("/login"):t.menusList=t.$tree(e.data.data)})},dialogClose:function(){this.$refs.formData.resetFields(),this.formData.pid=0},menusAdd:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.buttonOkIcon="el-icon-loading",t.buttonDisabled=!0,t.$http.post("/menus/add",t.$qs.stringify(t.formData)).then(function(e){t.buttonOkIcon="",t.buttonDisabled=!1,t.getMenusList(),t.dialogVisible=!1,t.$root.$emit("getMenusList")}))})},menusEdit:function(){var t=this;this.$http.post("/menus/edit",this.$qs.stringify(this.formData)).then(function(e){t.dialogVisible=!1,t.getMenusList(),t.$root.$emit("getMenusList")})},delete:function(t){var e=this;this.$http.get("/menus/delete?id="+t).then(function(t){e.getMenusList(),e.$root.$emit("getMenusList")})},select:function(t){var e=this;switch(t.type){case"add":this.btnStatus=!0,this.formData.pid=t.id,this.dialogVisible=!0,this.dialogTitle="添加下级菜单";break;case"edit":this.btnStatus=!1,this.dialogVisible=!0,this.dialogTitle="编辑",this.formData.text=t.row.text,this.formData.icon=t.row.icon,this.formData.url=t.row.url,this.$set(this.formData,"id",t.id);break;case"delete":this.$confirm("是否继续?","提示",{type:"warning"}).then(function(){e.delete(t.id)}).catch(function(){console.log("no")})}}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("菜单管理")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.btnStatus=!0,t.dialogVisible=!0,t.dialogTitle="添加"}}},[t._v("添加顶级菜单")])],1),t._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],attrs:{"default-expand-all":!0,data:t.menusList,props:{children:"children",label:"text"}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return a("div",{staticStyle:{width:"100%"},attrs:{onmousemove:"this.querySelector('.optVisible').style.display='inline-block'",onmouseout:"this.querySelector('.optVisible').style.display='none'"}},[a("i",{class:i.icon}),t._v(t._s(i.text)+"\r\n                "),t._v(" "),a("div",{staticClass:"optVisible",staticStyle:{display:"none","line-height":"40px"},on:{click:function(t){t.stopPropagation()}}},[a("el-tooltip",{attrs:{content:1==t.status?"当前显示":"当前隐藏",placement:"top",effect:"light"}},[a("el-switch",{attrs:{"active-color":"#9BCBFC","active-value":1,"inactive-value":0,width:30},on:{change:function(e){t.setStatus(i)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"data.status"}})],1),t._v(" "),a("el-dropdown",{on:{command:t.select}},[a("el-button",{attrs:{size:"mini",round:""}},[t._v("操作")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{type:"add",id:i.id}}},[t._v("\r\n                                添加下级菜单\r\n                            ")]),t._v(" "),0==i.children.length?a("el-dropdown-item",{attrs:{command:{type:"delete",id:i.id}}},[t._v("\r\n                                删除\r\n                            ")]):t._e(),t._v(" "),a("el-dropdown-item",{attrs:{command:{type:"edit",id:i.id,row:i}}},[t._v("\r\n                                编辑\r\n                            ")])],1)],1),t._v(" "),a("el-button-group",[a("el-button",{attrs:{type:"default",circle:"",size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){t.sort(i.id,"up",i.sort)}}}),t._v(" "),a("el-button",{attrs:{type:"default",circle:"",size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){t.sort(i.id,"down",i.sort)}}})],1)],1)])}}])})],1),t._v(" "),a("el-dialog",{attrs:{width:"400px",title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"formData",attrs:{"label-position":"left",model:t.formData,rules:t.rules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"名称",prop:"text"}},[a("el-input",{model:{value:t.formData.text,callback:function(e){t.$set(t.formData,"text",e)},expression:"formData.text"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"ICON",prop:"icon"}},[a("el-select",{model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}},[a("el-option",{attrs:{label:"无",value:""}}),t._v(" "),t._l(t.icons,function(e){return a("el-option",{key:"icon"+e,attrs:{value:e}},[a("i",{class:e}),t._v(" "),a("span",[t._v(t._s(e))])])})],2),t._v(" "),a("i",{class:t.formData.icon})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnStatus,expression:"btnStatus"}],attrs:{icon:t.buttonOkIcon,disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusAdd}},[t._v("确 定(add)")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.btnStatus,expression:"!btnStatus"}],attrs:{icon:t.buttonOkIcon,disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusEdit}},[t._v("确 定(edit)")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(v,g,!1,function(t){a("S4r0")},null,null).exports,_={data:function(){var t=this;return{rules:{username:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^[a-zA-Z]\w{3,14}$/.test(e):a(new Error("用户名长度为4到15位大小写字母"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/users/isexist?fieldname=username&fieldvalue="+a).then(function(e){0==e.data.error||t.oldusername==a?i():i(new Error("用户名已存在,请重新输入"))})},trigger:"blur"}],email:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^\w+@\w+(\.(com|cn|net|org|edu)){1,2}$/g.test(e):a(new Error("邮箱格式不正确,请重新输入"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/users/isexist?fieldname=email&fieldvalue="+a).then(function(e){0==e.data.error||t.oldemail==a?i():i(new Error("邮箱已存在,请重新输入"))})},trigger:"blur"}],phone:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^((13|18)(\d{9}))$|^(14[57]\d{8})$|^(17[07]\d{8})$|(^15[0-35-9]\d{8}$)/.test(e):a(new Error("手机号输入不正确,请重新输入"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/users/isexist?fieldname=phone&fieldvalue="+a).then(function(e){0==e.data.error||t.oldphone==a?i():i(new Error("手机号已存在,请重新输入"))})},trigger:"blur"}]},tableData:[],total:0,pagesize:4,currentpage:1,dialogTitle:"",dialogVisible:!1,oldusername:"",oldemail:"",oldphone:"",formData:{username:"",email:"",phone:""}}},created:function(){this.getUsersList()},methods:{getUsersList:function(){var t=this;this.$http.get("/users/list?pagesize="+this.pagesize+"&currentpage="+this.currentpage).then(function(e){t.total=e.data.total,t.tableData=e.data.data})},dialogClose:function(){this.$refs.formData.resetFields()},usersEdit:function(t){this.dialogVisible=!0,this.dialogTitle="编辑",this.formData.username=t.username,this.formData.email=t.email,this.formData.phone=t.phone,this.oldemail=t.email,this.oldphone=t.phone,this.oldusername=t.username,this.$set(this.formData,"id",t.id)},menusEdit:function(){var t=this;this.$refs.formData.validate(function(e){e?t.$http.post("/users/edit",p.a.stringify(t.formData)).then(function(e){0==e.error&&t.$http.get("/users/list").then(function(e){0==e.error&&(t.formData=e.data.data)}),t.dialogVisible=!1,t.getUsersList()}):t.dialogVisible=!0})},usersDelete:function(t){var e=this;this.$confirm("是否删除?","提示",{type:"warning"}).then(function(){e.$http.get("/users/delete?id="+t).then(function(t){e.getUsersList()})}).catch(function(){console.log("no")})},usersReset:function(t){var e=this;this.$confirm("重置后密码为:123123 , 是否继续?","提示",{type:"warning"}).then(function(){e.$http.get("/users/resetpassword?id="+t).then(function(t){e.getUsersList()})}).catch(function(){console.log("no")})}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"users"}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("用户管理")])]),t._v(" "),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"username",label:"用户名",width:100}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return a("div",{},[a("el-button-group",[a("el-button",{attrs:{type:"default",round:"",size:"mini"},on:{click:function(e){t.usersEdit(i)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"default",round:"",size:"mini"},on:{click:function(e){t.usersDelete(i.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"default",round:"",size:"mini"},on:{click:function(e){t.usersReset(i.id)}}},[t._v("重置密码")])],1)],1)}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":t.currentpage,"page-size":t.pagesize,total:t.total,background:"",layout:"prev,pager,next"},on:{"update:currentPage":function(e){t.currentpage=e},"current-change":t.getUsersList}})],1)],1),t._v(" "),a("el-dialog",{attrs:{width:"400px",title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"formData",attrs:{"label-position":"left",model:t.formData,rules:t.rules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.menusEdit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(_,w,!1,function(t){a("wVAO")},null,null).exports,D={data:function(){return{rules:{text:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^.{2,18}$/.test(e):a(new Error("名称必须在2-18位之间!"));break;default:a()}}}]},btnStatus:!0,treeLoading:!1,buttonOkIcon:"",buttonDisabled:!1,dialogTitle:"",dialogVisible:!1,menusList:[],formData:{text:"",pid:0},icons:["el-icon-info","el-icon-error","el-icon-success","el-icon-warning","el-icon-question","el-icon-back","el-icon-arrow-left","el-icon-arrow-down","el-icon-arrow-right","el-icon-arrow-up","el-icon-caret-left","el-icon-caret-bottom","el-icon-caret-top","el-icon-caret-right","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-minus","el-icon-plus","el-icon-remove","el-icon-circle-plus","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-close","el-icon-check","el-icon-circle-close","el-icon-circle-check","el-icon-circle-close-outline","el-icon-circle-check-outline","el-icon-zoom-out","el-icon-zoom-in","el-icon-d-caret","el-icon-sort","el-icon-sort-down","el-icon-sort-up","el-icon-tickets","el-icon-document","el-icon-goods","el-icon-sold-out","el-icon-news","el-icon-message","el-icon-date","el-icon-printer","el-icon-time","el-icon-bell","el-icon-mobile-phone","el-icon-service","el-icon-view","el-icon-menu","el-icon-more","el-icon-more-outline","el-icon-star-on","el-icon-star-off","el-icon-location","el-icon-location-outline","el-icon-phone","el-icon-phone-outline","el-icon-picture","el-icon-picture-outline","el-icon-delete","el-icon-search","el-icon-edit","el-icon-edit-outline","el-icon-rank","el-icon-refresh","el-icon-share","el-icon-setting","el-icon-upload","el-icon-upload2","el-icon-download","el-icon-loading"]}},created:function(){this.getMenusList()},methods:{sort:function(t,e,a){var i=this;this.$http.post("/outlines/sort",this.$qs.stringify({id:t,dir:e,sort:a})).then(function(){i.getMenusList()})},getMenusList:function(){var t=this;this.treeLoading=!0,this.$http.get("/outlines/list").then(function(e){t.treeLoading=!1,e.data.error>0&&4==e.data.error?t.$router.push("/login"):t.menusList=t.$tree(e.data.data)})},dialogClose:function(){this.$refs.formData.resetFields(),this.formData.pid=0},menusAdd:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.buttonOkIcon="el-icon-loading",t.buttonDisabled=!0,t.$http.post("/outlines/add",t.$qs.stringify(t.formData)).then(function(e){t.buttonOkIcon="",t.buttonDisabled=!1,t.getMenusList(),t.dialogVisible=!1}))})},menusEdit:function(){var t=this;this.$http.post("/outlines/edit",this.$qs.stringify(this.formData)).then(function(e){t.dialogVisible=!1,t.getMenusList()})},delete:function(t){var e=this;this.$http.get("/outlines/delete?id="+t).then(function(t){console.log(t),e.getMenusList()})},select:function(t){var e=this;switch(t.type){case"add":this.btnStatus=!0,this.formData.pid=t.id,this.dialogVisible=!0,this.dialogTitle="添加下级菜单";break;case"edit":this.btnStatus=!1,this.dialogVisible=!0,this.dialogTitle="编辑",this.formData.text=t.row.text,this.formData.icon=t.row.icon,this.formData.url=t.row.url,this.$set(this.formData,"id",t.id);break;case"delete":this.$confirm("是否继续?","提示",{type:"warning"}).then(function(){e.delete(t.id)}).catch(function(){console.log("no")})}}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("大纲管理")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.btnStatus=!0,t.dialogVisible=!0,t.dialogTitle="添加"}}},[t._v("添加顶级大纲")])],1),t._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],attrs:{"default-expand-all":!0,data:t.menusList,props:{children:"children",label:"text"}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return a("div",{staticStyle:{width:"100%"},attrs:{onmousemove:"this.querySelector('.optVisible').style.display='inline-block'",onmouseout:"this.querySelector('.optVisible').style.display='none'"}},[a("i",{class:i.icon}),t._v(t._s(i.text)+"\r\n                "),a("span",{staticClass:"optVisible",staticStyle:{display:"none","line-height":"40px"},on:{click:function(t){t.stopPropagation()}}},[a("el-dropdown",{on:{command:t.select}},[a("el-button",{attrs:{size:"mini",round:""}},[t._v("操作")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{type:"add",id:i.id}}},[t._v("\r\n                                添加下级菜单\r\n                            ")]),t._v(" "),0==i.children.length?a("el-dropdown-item",{attrs:{command:{type:"delete",id:i.id}}},[t._v("\r\n                                删除\r\n                            ")]):t._e(),t._v(" "),a("el-dropdown-item",{attrs:{command:{type:"edit",id:i.id,row:i}}},[t._v("\r\n                                编辑\r\n                            ")])],1)],1),t._v(" "),a("el-button",{attrs:{round:"",size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){t.sort(i.id,"up",i.sort)}}}),t._v(" "),a("el-button",{attrs:{round:"",size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){t.sort(i.id,"down",i.sort)}}})],1)])}}])})],1),t._v(" "),a("el-dialog",{attrs:{width:"400px",title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"formData",attrs:{"label-position":"left",model:t.formData,rules:t.rules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"名称",prop:"text"}},[a("el-input",{model:{value:t.formData.text,callback:function(e){t.$set(t.formData,"text",e)},expression:"formData.text"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnStatus,expression:"btnStatus"}],attrs:{icon:t.buttonOkIcon,disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusAdd}},[t._v("确 定(add)")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.btnStatus,expression:"!btnStatus"}],attrs:{icon:t.buttonOkIcon,disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusEdit}},[t._v("确 定(edit)")])],1)],1)],1)},staticRenderFns:[]};var k=a("VU/8")(D,$,!1,function(t){a("Lg+t")},null,null).exports,x={data:function(){return{rules:{text:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^.{2,18}$/.test(e):a(new Error("名称必须在2-18位之间!!!"));break;default:a()}}}]},btnStatus:!0,treeLoading:!1,buttonDisabled:!1,dialogTitle:"",dialogVisible:!1,menusList:[],formData:{text:"",pid:0}}},created:function(){this.getMenusList()},methods:{sort:function(t,e,a){var i=this;this.$http.post("/items/sort",this.$qs.stringify({id:t,dir:e,sort:a})).then(function(){i.getMenusList()})},getMenusList:function(){var t=this;this.treeLoading=!0,this.$http.get("/items/list").then(function(e){t.treeLoading=!1,e.data.error>0&&4==e.data.error?t.$router.push("/login"):t.menusList=t.$tree(e.data.data)})},dialogClose:function(){this.$refs.formData.resetFields(),this.formData.pid=0},menusAdd:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.buttonOkIcon="el-icon-loading",t.buttonDisabled=!0,t.$http.post("/items/add",t.$qs.stringify(t.formData)).then(function(e){t.buttonOkIcon="",t.buttonDisabled=!1,t.getMenusList(),t.dialogVisible=!1}))})},menusEdit:function(){var t=this;this.$http.post("/items/edit",this.$qs.stringify(this.formData)).then(function(e){t.dialogVisible=!1,t.getMenusList()})},delete:function(t){var e=this;this.$http.get("/items/delete?id="+t).then(function(t){console.log(t),e.getMenusList()})},select:function(t){var e=this;switch(t.type){case"add":this.btnStatus=!0,this.formData.pid=t.id,this.dialogVisible=!0,this.dialogTitle="添加下级菜单";break;case"edit":this.btnStatus=!1,this.dialogVisible=!0,this.dialogTitle="编辑",this.formData.text=t.row.text,this.formData.icon=t.row.icon,this.formData.url=t.row.url,this.$set(this.formData,"id",t.id);break;case"delete":this.$confirm("是否继续?","提示",{type:"warning"}).then(function(){e.delete(t.id)}).catch(function(){console.log("no")})}}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("选项管理")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.btnStatus=!0,t.dialogVisible=!0,t.dialogTitle="添加"}}},[t._v("添加分组")])],1),t._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],attrs:{"default-expand-all":!0,data:t.menusList,props:{children:"children",label:"text"}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return a("div",{staticStyle:{width:"100%"},attrs:{onmousemove:"this.querySelector('.optVisible').style.display='inline-block'",onmouseout:"this.querySelector('.optVisible').style.display='none'"}},[a("i",{class:i.icon}),t._v(t._s(i.text)+"\n                "),a("span",{staticClass:"optVisible",staticStyle:{display:"none","line-height":"40px"},on:{click:function(t){t.stopPropagation()}}},[a("el-dropdown",{on:{command:t.select}},[a("el-button",{attrs:{size:"mini",round:""}},[t._v("操作")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[0==i.pid?a("el-dropdown-item",{attrs:{command:{type:"add",id:i.id}}},[t._v("\n                            添加组选项\n                        ")]):t._e(),t._v(" "),0==i.children.length?a("el-dropdown-item",{attrs:{command:{type:"delete",id:i.id}}},[t._v("\n                            删除\n                        ")]):t._e(),t._v(" "),a("el-dropdown-item",{attrs:{command:{type:"edit",id:i.id,row:i}}},[t._v("\n                            编辑\n                        ")])],1)],1),t._v(" "),a("el-button",{attrs:{round:"",size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){t.sort(i.id,"up",i.sort)}}}),t._v(" "),a("el-button",{attrs:{round:"",size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){t.sort(i.id,"down",i.sort)}}})],1)])}}])})],1),t._v(" "),a("el-dialog",{attrs:{width:"400px",title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"formData",attrs:{"label-position":"left",model:t.formData,rules:t.rules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"名称",prop:"text"}},[a("el-input",{model:{value:t.formData.text,callback:function(e){t.$set(t.formData,"text",e)},expression:"formData.text"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-error",type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnStatus,expression:"btnStatus"}],attrs:{icon:"el-icon-success",disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusAdd}},[t._v("确 定(add)")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.btnStatus,expression:"!btnStatus"}],attrs:{icon:"el-icon-edit",disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusEdit}},[t._v("确 定(edit)")])],1)],1)],1)},staticRenderFns:[]};var j=a("VU/8")(x,L,!1,function(t){a("lwq0")},null,null).exports,E={data:function(){var t=this;return{rules:{classname:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^[0-9]{3,9}$/.test(e):a(new Error("长度为3到9位数字"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/classes/isexist?fieldname=classname&fieldvalue="+a).then(function(e){0==e.data.error||t.oldclassname==a?i():i(new Error("用户名已存在,请重新输入"))})},trigger:"blur"}],status:[{validator:function(t,e,a){a()}}]},btnStatus:!0,tableData:[],total:0,pagesize:4,currentpage:1,dialogTitle:"",dialogVisible:!1,oldclassname:"",formData:{classname:"",status:""}}},created:function(){this.getUsersList()},methods:{getUsersList:function(){var t=this;this.$http.get("/classes/list?pagesize="+this.pagesize+"&currentpage="+this.currentpage).then(function(e){t.total=e.data.total,t.tableData=e.data.data})},dialogClose:function(){this.$refs.formData.resetFields()},usersEdit:function(t){this.dialogVisible=!0,this.dialogTitle="编辑",this.formData.classname=t.classname,this.formData.status=t.status,this.$set(this.formData,"id",t.id),this.oldclassname=t.classname},menusEdit:function(){var t=this;this.$refs.formData.validate(function(e){e?t.$http.post("/classes/edit",t.$qs.stringify(t.formData)).then(function(e){t.dialogVisible=!1,t.getUsersList()}):t.dialogVisible=!0})},menusAdd:function(){var t=this;this.$refs.formData.validate(function(e){e&&t.$http.post("/classes/add",t.$qs.stringify(t.formData)).then(function(e){t.getUsersList(),t.dialogVisible=!1})})},usersDelete:function(t){var e=this;this.$confirm("是否删除?","提示",{type:"warning"}).then(function(){e.$http.get("/classes/delete?id="+t).then(function(t){e.getUsersList()})}).catch(function(){console.log("no")})}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"users"}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("班级管理")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.btnStatus=!0,t.dialogVisible=!0,t.dialogTitle="添加"}}},[t._v("添加班级")])],1),t._v(" "),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"classname",label:"班级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:0==i.status,expression:"row.status==0"}],attrs:{type:"success"}},[t._v("显示")]),t._v(" "),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:1==i.status,expression:"row.status==1"}],attrs:{type:"info"}},[t._v("不显示")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return a("div",{},[a("el-button-group",[a("el-button",{attrs:{type:"default",round:"",size:"mini"},on:{click:function(e){t.usersEdit(i),t.btnStatus=!1}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"default",round:"",size:"mini"},on:{click:function(e){t.usersDelete(i.id)}}},[t._v("删除")])],1)],1)}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":t.currentpage,"page-size":t.pagesize,total:t.total,background:"",layout:"prev,pager,next"},on:{"update:currentPage":function(e){t.currentpage=e},"current-change":t.getUsersList}})],1)],1),t._v(" "),a("el-dialog",{attrs:{width:"400px",title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"formData",attrs:{"label-position":"left",model:t.formData,rules:t.rules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"班级",prop:"classname"}},[a("el-input",{model:{value:t.formData.classname,callback:function(e){t.$set(t.formData,"classname",e)},expression:"formData.classname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-tag",{attrs:{size:"mini"}},[t._v("不显示")]),t._v(" "),a("el-switch",{attrs:{"active-value":0,"inactive-value":1},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}}),t._v(" "),a("el-tag",{attrs:{size:"mini"}},[t._v("显示")])],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnStatus,expression:"btnStatus"}],attrs:{type:"primary"},on:{click:t.menusAdd}},[t._v("确 定(add)")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.btnStatus,expression:"!btnStatus"}],attrs:{type:"primary"},on:{click:t.menusEdit}},[t._v("确 定(edit)")])],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(E,z,!1,function(t){a("SF6w")},null,null).exports,S=a("mvHQ"),q=a.n(S),U={data:function(){return{rules:{title:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^.{2,15}$/.test(e):a(new Error("标题长度为2到15位"));break;default:a()}}}]},itemsList:[],outlinesList:[],classesList:[],formData:{title:"",content:[],item_id:"",classes_id:""}}},created:function(){this.getOutlinesList(),this.getItemsList(),this.getClassesList()},methods:{save:function(){var t=this;this.$http.post("/papers/add",this.$qs.stringify({title:this.formData.title,classes_id:this.formData.classes_id,item_id:this.formData.item_id,content:q()(this.formData.content)})).then(function(e){t.$router.push({name:"paperslist"})})},selectNode:function(t,e){if(!(t.children.length>0))if(e)this.formData.content.push(t);else{var a=this.formData.content.indexOf(t);this.formData.content.splice(a,1)}},getClassesList:function(){var t=this;this.$http.get("/classes/list").then(function(e){t.classesList=e.data.data})},getOutlinesList:function(){var t=this;this.$http.get("/outlines/list").then(function(e){t.outlinesList=t.$tree(e.data.data)})},getItemsList:function(){var t=this;this.$http.get("/items/list").then(function(e){t.itemsList=t.$tree(e.data.data)})}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"papersadd"}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加")])]),t._v(" "),a("el-form",{ref:"formData",attrs:{rules:t.rules,model:t.formData,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"大纲"}},[a("el-tree",{attrs:{"show-checkbox":"","render-after-expand":!1,data:t.outlinesList,props:{children:"children",label:"text"}},on:{"check-change":t.selectNode}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选项"}},[a("el-select",{model:{value:t.formData.item_id,callback:function(e){t.$set(t.formData,"item_id",e)},expression:"formData.item_id"}},t._l(t.itemsList,function(t){return a("el-option",{key:"item"+t.id,attrs:{label:t.text,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"班级"}},[a("el-select",{model:{value:t.formData.classes_id,callback:function(e){t.$set(t.formData,"classes_id",e)},expression:"formData.classes_id"}},t._l(t.classesList,function(t){return a("el-option",{key:"item"+t.id,attrs:{label:t.classname,value:t.id}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var F=a("VU/8")(U,C,!1,function(t){a("IupX")},null,null).exports,O=a("PJh5"),R=a.n(O),M={data:function(){return{papersList:[],pagesize:4,currentpage:1,total:0}},created:function(){this.getPapersList()},methods:{formatDate:function(t){return R()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},getPapersList:function(){var t=this;this.$http.get("/papers/list",{params:{pagesize:this.pagesize,currentpage:this.currentpage}}).then(function(e){t.total=e.data.total,t.papersList=e.data.data})},del:function(t){var e=this;this.$confirm("是否继续?","提示",{type:"warning"}).then(function(){e.$http.get("/papers/delete",{params:{id:t}}).then(function(t){e.getPapersList()})}).catch(function(){console.log("no")})}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"paperslist"}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("问卷管理")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.$router.push({name:"papersadd"})}}},[t._v("添加问卷")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.papersList}},[a("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"日期",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"创建人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"classname",label:"班级"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"270"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return a("div",{},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.del(i.id)}}},[t._v("删除")]),t._v(" "),a("router-link",{attrs:{to:{name:"papersedit",params:{id:i.id}}}},[a("el-button",{attrs:{type:"text"}},[t._v("编辑")])],1),t._v(" "),a("router-link",{attrs:{to:{name:"count",params:{paper_id:i.id}}}},[a("el-button",{attrs:{type:"text"}},[t._v("分析")])],1),t._v(" "),a("router-link",{attrs:{to:{name:"publish",params:{paper_id:i.id}}}},[a("el-button",{attrs:{type:"text"}},[t._v("发布")])],1)],1)}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":t.currentpage,"page-size":t.pagesize,total:t.total,background:"",layout:"prev,pager,next"},on:{"update:currentPage":function(e){t.currentpage=e},"current-change":t.getPapersList}})],1)],1)],1)},staticRenderFns:[]};var P=a("VU/8")(M,N,!1,function(t){a("IqmP")},null,null).exports,I={props:["id"],data:function(){return{itemsList:[],outlinesList:[],classesList:[],formData:{id:"",title:"",content:[],item_id:"",classes_id:""}}},created:function(){this.getPaperList(),this.getOutlinesList(),this.getItemsList(),this.getClassesList()},methods:{saves:function(){var t=this;this.$http.post("/papers/edit",this.$qs.stringify({id:this.formData.id,title:this.formData.title,classes_id:this.formData.classes_id,item_id:this.formData.item_id,content:q()(this.formData.content)})).then(function(e){t.$router.push({name:"paperslist"})})},getPaperList:function(){var t=this;this.$http.get("/papers/one",{params:{id:this.id}}).then(function(e){4==e.data.error&&t.$router.push("/login"),e.data.data.item=JSON.parse(e.data.data.item),e.data.data.content=JSON.parse(e.data.data.content),t.formData.id=e.data.data.id,t.formData.title=e.data.data.title,t.formData.item_id=+e.data.data.item_id,t.formData.classes_id=+e.data.data.classes_id,t.formData.content=e.data.data.content;var a=e.data.data.content.map(function(t){return t.id});t.$refs.tree.setCheckedKeys(a)})},selectNode:function(t,e){if(!(t.children.length>0))if(e)this.formData.content.push(t);else{var a=this.formData.content.indexOf(t);this.formData.content.splice(a,1)}},getClassesList:function(){var t=this;this.$http.get("/classes/list").then(function(e){t.classesList=e.data.data})},getOutlinesList:function(){var t=this;this.$http.get("/outlines/list").then(function(e){t.outlinesList=t.$tree(e.data.data)})},getItemsList:function(){var t=this;this.$http.get("/items/list").then(function(e){t.itemsList=t.$tree(e.data.data)})}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"papersedit"}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑")])]),t._v(" "),a("el-form",{ref:"formData",attrs:{model:t.formData,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"大纲"}},[a("el-tree",{ref:"tree",attrs:{"node-key":"id","show-checkbox":"","render-after-expand":!1,data:t.outlinesList,props:{children:"children",label:"text"}},on:{"check-change":t.selectNode}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选项"}},[a("el-select",{model:{value:t.formData.item_id,callback:function(e){t.$set(t.formData,"item_id",e)},expression:"formData.item_id"}},t._l(t.itemsList,function(t){return a("el-option",{key:"item"+t.id,attrs:{label:t.text,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"班级"}},[a("el-select",{model:{value:t.formData.classes_id,callback:function(e){t.$set(t.formData,"classes_id",e)},expression:"formData.classes_id"}},t._l(t.classesList,function(t){return a("el-option",{key:"item"+t.id,attrs:{label:t.classname,value:t.id}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saves()}}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(I,T,!1,function(t){a("3l3h")},null,null).exports,H={props:["paper_id"],data:function(){return{paper:{},items:{},note:"",username:""}},created:function(){this.getPaper()},methods:{save:function(){var t=this;this.jq(".el-card__body>.is-checked").length===this.jq(".choose").length?this.$http.post("/answer/add",this.$qs.stringify({paper_id:this.paper_id,content:q()(this.paper.content),items:q()(this.items),note:this.note})).then(function(e){console.log(e),t.$router.push("/over")}):this.$message({message:"你还有一个未作答的题目!",type:"warning"})},getPaper:function(){var t=this;this.$http.get("/papers/publish",{params:{paper_id:this.paper_id}}).then(function(e){e.data.data.content=JSON.parse(e.data.data.content),t.paper=e.data.data,t.items=e.data.items})}}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"publish"}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("img",{attrs:{src:"/static/logo.png",alt:""}}),t._v(" "),a("span",[t._v("问卷")]),t._v(" "),a("b",[t._v(t._s(t.paper.title))]),t._v(" "),a("i",[t._v(t._s(t.paper.class_id))])]),t._v(" "),t._l(t.paper.content,function(e,i){return a("el-card",{key:"con"+e.id,staticClass:"choose"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(i+1)+"、"+t._s(e.text))])]),t._v(" "),t._l(t.items,function(e){return a("el-radio",{key:"item"+e.id,attrs:{label:e.id},model:{value:t.paper.content[i].answer,callback:function(e){t.$set(t.paper.content[i],"answer",e)},expression:"paper.content[index].answer"}},[t._v(t._s(e.text))])})],2)}),t._v(" "),a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("其他建议")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",placeholder:"其他建议"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("提交")])],2)],1)},staticRenderFns:[]};var B=a("VU/8")(H,X,!1,function(t){a("2jw9")},null,null).exports,W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"over"}},[e("el-card",{attrs:{id:"card"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("img",{attrs:{src:"/static/logo.png",alt:""}}),this._v(" "),e("span",[this._v("随堂问卷系统")])]),this._v(" "),e("div",{attrs:{id:"pap"}},[e("span",{staticClass:"el-icon-success"}),this._v(" "),e("span",[this._v("本次问卷作答结束，谢谢！")])]),this._v(" "),e("div",{attrs:{id:"toindex"}},[e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[this._v("回到首页→")])],1)])],1)},staticRenderFns:[]};var J=a("VU/8")({},W,!1,function(t){a("b3yA")},null,null).exports,Y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"first"}},[e("div",[this._v("欢迎登录")]),this._v(" "),e("div",[this._v("随堂问卷管理系统")])])}]};var G=a("VU/8")({},Y,!1,function(t){a("Rn7/")},null,null).exports,Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"count"}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("统计分析")])]),t._v(" "),a("ve-pie",{attrs:{data:t.countData}})],1),t._v(" "),a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("统计分析行")])]),t._v(" "),t._l(t.countrowData,function(e,i){return a("el-card",{key:"row"+i,attrs:{id:"elcard2"}},[a("ul",t._l(e.data.content,function(e,i){return a("li",{key:"con"+i,attrs:{id:"li1"}},[a("span",{attrs:{id:"con_text"}},[t._v(t._s(e.text))]),t._v(" "),a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.answerText))])],1)})),t._v(" "),a("ve-histogram",{attrs:{data:e,extend:t.extend}})],1)})],2)],1)},staticRenderFns:[]};var K=a("VU/8")({props:["paper_id"],data:function(){return{countData:{columns:[],rows:[]},countrowData:[]}},created:function(){this.getCount(),this.getCountRow(),this.extend={series:{barWidth:"40px",default:"50%"}}},methods:{getCount:function(){var t=this;this.$http.get("/answer/count",{params:{paper_id:this.paper_id}}).then(function(e){t.countData.columns=e.data.data.columns,t.countData.rows=e.data.data.rows})},getCountRow:function(){var t=this;this.$http.get("/answer/countrow",{params:{paper_id:this.paper_id}}).then(function(e){t.countrowData=e.data.data})}}},Z,!1,function(t){a("YUIF")},null,null).exports,Q={data:function(){var t=this;return{rules:{username:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^[a-zA-Z]\w{3,14}$/.test(e):a(new Error("用户名长度为4到15位大小写字母"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/users/isexist?fieldname=username&fieldvalue="+a).then(function(e){0==e.data.error||t.oldusername==a?i():i(new Error("用户名已存在,请重新输入"))})},trigger:"blur"}],email:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^\w+@\w+(\.(com|cn|net|org|edu)){1,2}$/g.test(e):a(new Error("邮箱格式不正确,请重新输入"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/users/isexist?fieldname=email&fieldvalue="+a).then(function(e){0==e.data.error||t.oldemail==a?i():i(new Error("邮箱已存在,请重新输入"))})},trigger:"blur"}],phone:[{validator:function(t,e,a){switch(!0){case""===e.trim():a(new Error("不能为空"));break;case!/^((13|18)(\d{9}))$|^(14[57]\d{8})$|^(17[07]\d{8})$|(^15[0-35-9]\d{8}$)/.test(e):a(new Error("手机号输入不正确,请重新输入"));break;default:a()}}},{validator:function(e,a,i){t.$http.get("/users/isexist?fieldname=phone&fieldvalue="+a).then(function(e){0==e.data.error||t.oldphone==a?i():i(new Error("手机号已存在,请重新输入"))})},trigger:"blur"}]},form:{username:"",phone:"",email:"",oldusername:"",oldemail:"",oldphone:""},imageUrl:""}},created:function(){this.getform()},methods:{save:function(){var t=this;this.$http.post("/users/edit",p.a.stringify(this.form)).then(function(e){0==e.error&&t.$http.get("/users/list").then(function(e){0==e.error&&(console.log(t.form),t.form=e.data.data)}),t.$message({message:"修改成功!!!",type:"success"}),t.getform()})},getform:function(){var t=this;this.$http.get("/users/one").then(function(e){t.form.username=e.data.data.username,t.form.phone=e.data.data.phone,t.form.email=e.data.data.email,t.oldemail=e.data.data.email,t.oldphone=e.data.data.phone,t.oldusername=e.data.data.username,t.$set(t.form,"id",e.data.data.id)})},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("个人中心")])]),t._v(" "),a("el-form",{ref:"form",attrs:{"label-position":"left",model:t.form,"label-width":"80px",rules:t.rules}},[t._v("\r\n            头像\r\n            "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"username"}},[a("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),t._v("\r\n            文件\r\n            "),a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("修改并保存")])],1)],1)],1)],1)},staticRenderFns:[]};var et=a("VU/8")(Q,tt,!1,function(t){a("tFWE")},null,null).exports;i.default.use(o.a);var at=new o.a({routes:[{path:"/",redirect:"/index/first"},{path:"/index",name:"index",redirect:"/index/first",component:l,children:[{path:"count/:paper_id",props:!0,name:"count",component:K},{path:"first",component:G},{path:"users",component:y},{path:"menus",component:b},{path:"outlines",component:k},{path:"items",component:j},{path:"classes",component:V},{path:"papers/add",name:"papersadd",component:F},{path:"papers/list",name:"paperslist",component:P},{path:"papers/edit/:id",props:!0,name:"papersedit",component:A},{path:"myself",component:et}]},{path:"/login",name:"login",component:d},{path:"/regist",name:"regist",component:h},{path:"/publish/:paper_id",name:"publish",props:!0,component:B},{path:"/over",name:"over",props:!0,component:J}]}),it=a("mtWM"),st=a.n(it),nt=a("7t+N"),ot=a.n(nt);function rt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.forEach(function(i){i.pid===e&&(i.children=[],a.push(i),rt(t,i.id,i.children))}),a}st.a.defaults.baseURL="http://127.0.0.1:3000",st.a.defaults.withCredentials=!0;var lt={install:function(t,e){t.prototype.apiUrl="http://127.0.0.1:3000",t.prototype.$http=st.a,t.prototype.jq=ot.a,t.prototype.$qs=p.a,t.prototype.$tree=rt,t.prototype.$moment=R.a}},ct=a("zL8q"),dt=a.n(ct),ut=(a("tvR6"),a("vO7p")),pt=a.n(ut);i.default.use(dt.a),i.default.use(lt),i.default.use(pt.a),new i.default({el:"#app",router:at,components:{App:n},template:"<App/>"})},"Rn7/":function(t,e){},S4r0:function(t,e){},SF6w:function(t,e){},YUIF:function(t,e){},b3yA:function(t,e){},lwq0:function(t,e){},tFWE:function(t,e){},tZws:function(t,e){},tvR6:function(t,e){},uslO:function(t,e,a){var i={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(t){return a(n(t))}function n(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(i)},s.resolve=n,t.exports=s,s.id="uslO"},wVAO:function(t,e){},yGYl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8682eefe8e116e026769.js.map