webpackJsonp([1],{IWQh:function(t,e){},Kuv3:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},a=n("VU/8")({name:"App"},i,!1,null,null,null).exports,r=n("/ocq"),s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"index"}},[n("el-container",[n("el-header",{attrs:{height:""}},[n("img",{attrs:{src:"/static/logo.png"}}),t._v(" "),n("span",[t._v("问卷管理系统")])]),t._v(" "),n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("el-menu",{attrs:{"default-active":t.curPath,router:!0}},[t._l(t.menusList,function(e){return[0==e.children.length?n("el-menu-item",{key:e.sort,attrs:{index:e.url}},[n("i",{class:e.icon}),t._v(" "+t._s(e.text)+"\n            ")]):t._e(),t._v(" "),e.children.length>0?n("el-submenu",{key:e.sort,attrs:{index:e.url}},[n("span",{attrs:{slot:"title"},slot:"title"},[n("i",{class:e.icon}),t._v(" \n              "+t._s(e.text))]),t._v(" "),t._l(e.children,function(e){return n("el-menu-item",{key:e.sort,attrs:{index:e.url}},[n("i",{class:e.icon}),t._v(" "+t._s(e.text)+"\n              ")])})],2):t._e()]})],2)],1),t._v(" "),n("el-main",{attrs:{height:""}},[n("router-view")],1)],1)],1)],1)},staticRenderFns:[]},l=n("VU/8")({data:function(){return{menusList:[]}},computed:{curPath:function(){return this.$route.path}},created:function(){var t=this;this.getMenusList(),this.$root.$on("getMenusList",function(){t.getMenusList()})},methods:{getMenusList:function(){var t=this;this.treeLoading=!0,this.$http.get("/menus/list?status=1").then(function(e){t.treeLoading=!1,e.data.error>0&&4==e.data.error?t.$router.push("/login"):t.menusList=t.$tree(e.data.data)})}}},s,!1,null,null,null).exports,c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("el-card",{staticStyle:{margin:"0 auto",width:"400px","margin-top":"100px"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("登陆")])]),t._v(" "),n("el-form",{ref:"login",attrs:{rules:t.rules,"label-position":"left",model:t.formLoginData,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:t.formLoginData.username,callback:function(e){t.$set(t.formLoginData,"username",e)},expression:"formLoginData.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.formLoginData.password,callback:function(e){t.$set(t.formLoginData,"password",e)},expression:"formLoginData.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登陆")]),t._v(" "),n("router-link",{attrs:{to:"/regist"}},[t._v("注册")])],1)],1)],1)],1)},staticRenderFns:[]},u=n("VU/8")({data:function(){return{formLoginData:{username:"",password:""},rules:{username:{required:!0,message:"用户名必须填写",trigger:"blur"},password:{required:!0,message:"密码必须填写",trigger:"blur"}}}},methods:{login:function(){var t=this;this.$refs.login.validate(function(e){e&&t.$http.post("/users/login",t.$qs.stringify(t.formLoginData)).then(function(e){0==e.data.error?t.$router.push("/index"):t.$message.error("用户名或密码错误！")})})}}},c,!1,null,null,null).exports,d={data:function(){var t=this;return{formLoginData:{username:"",password:"",password2:"",email:"",phone:""},rules:{username:[{validator:function(t,e,n){/^[a-zA-Z]\w{3,17}$/.test(e)?n():n(new Error("用户名非法"))},trigger:"change"}],password:[{validator:function(t,e,n){/^.{6,18}$/.test(e)?n():n(new Error("密码非法"))},trigger:"change"}],password2:[{validator:function(e,n,o){""===n.trim()?o(new Error("不能为空")):n!==t.formLoginData.password?o(new Error("两次密码输入不一致")):o()},trigger:"change"}]}}},created:function(){},methods:{regist:function(){var t=this;this.$refs.formLogin.validate(function(e){e&&t.$http.post("/users/add",t.qs.stringify(t.formLoginData)).then(function(t){})})},getUsersList:function(){this.$http.get("/users/list").then(function(t){console.log(t.data.data)})}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("el-card",{staticStyle:{margin:"0 auto",width:"400px"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("注册")])]),t._v(" "),n("el-form",{ref:"formLogin",attrs:{"label-position":"left",model:t.formLoginData,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:t.formLoginData.username,callback:function(e){t.$set(t.formLoginData,"username",e)},expression:"formLoginData.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.formLoginData.password,callback:function(e){t.$set(t.formLoginData,"password",e)},expression:"formLoginData.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[n("el-input",{attrs:{type:"password"},model:{value:t.formLoginData.password2,callback:function(e){t.$set(t.formLoginData,"password2",e)},expression:"formLoginData.password2"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{model:{value:t.formLoginData.email,callback:function(e){t.$set(t.formLoginData,"email",e)},expression:"formLoginData.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"手机",prop:"phone"}},[n("el-input",{model:{value:t.formLoginData.phone,callback:function(e){t.$set(t.formLoginData,"phone",e)},expression:"formLoginData.phone"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.regist}},[t._v("注册")]),t._v(" "),n("router-link",{attrs:{to:"/login"}},[t._v("已有账号")])],1)],1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(d,p,!1,function(t){n("IWQh")},"data-v-55a5f53f",null).exports,f={data:function(){return{status:!1,rules:{text:[{validator:function(t,e,n){switch(!0){case""===e.trim():n(new Error("不能为空"));break;case!/^.{2,18}$/.test(e):n(new Error("2-18"));break;default:n()}}}],url:[{validator:function(t,e,n){switch(!0){case""===e.trim():n(new Error("不能为空"));break;case!/^(\/\w+)+$/.test(e):n(new Error("格式非法"));break;default:n()}}}]},btnStatus:!0,treeLoading:!1,buttonOkIcon:"",buttonDisabled:!1,dialogTitle:"",dialogVisible:!1,menusList:[],formData:{text:"",icon:"",url:"",pid:0},icons:["el-icon-info","el-icon-error","el-icon-success","el-icon-warning","el-icon-question","el-icon-back","el-icon-arrow-left","el-icon-arrow-down","el-icon-arrow-right","el-icon-arrow-up","el-icon-caret-left","el-icon-caret-bottom","el-icon-caret-top","el-icon-caret-right","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-minus","el-icon-plus","el-icon-remove","el-icon-circle-plus","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-close","el-icon-check","el-icon-circle-close","el-icon-circle-check","el-icon-circle-close-outline","el-icon-circle-check-outline","el-icon-zoom-out","el-icon-zoom-in","el-icon-d-caret","el-icon-sort","el-icon-sort-down","el-icon-sort-up","el-icon-tickets","el-icon-document","el-icon-goods","el-icon-sold-out","el-icon-news","el-icon-message","el-icon-date","el-icon-printer","el-icon-time","el-icon-bell","el-icon-mobile-phone","el-icon-service","el-icon-view","el-icon-menu","el-icon-more","el-icon-more-outline","el-icon-star-on","el-icon-star-off","el-icon-location","el-icon-location-outline","el-icon-phone","el-icon-phone-outline","el-icon-picture","el-icon-picture-outline","el-icon-delete","el-icon-search","el-icon-edit","el-icon-edit-outline","el-icon-rank","el-icon-refresh","el-icon-share","el-icon-setting","el-icon-upload","el-icon-upload2","el-icon-download","el-icon-loading"]}},created:function(){this.getMenusList()},methods:{setStatus:function(t){var e=this;this.$http.get("/menus/status",{params:{id:t.id,status:t.status}}).then(function(){e.$root.$emit("getMenusList")})},sort:function(t,e,n){var o=this;this.$http.post("/menus/sort",this.$qs.stringify({id:t,dir:e,sort:n})).then(function(){o.getMenusList(),o.$root.$emit("getMenusList")})},getMenusList:function(){var t=this;this.treeLoading=!0,this.$http.get("/menus/list").then(function(e){t.treeLoading=!1,e.data.error>0&&4==e.data.error?t.$router.push("/login"):t.menusList=t.$tree(e.data.data)})},dialogClose:function(){this.formData.icon="",this.formData.text="",this.formData.url="",this.formData.pid=0},menusAdd:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.buttonOkIcon="el-icon-loading",t.buttonDisabled=!0,t.$http.post("/menus/add",t.$qs.stringify(t.formData)).then(function(e){t.buttonOkIcon="",t.buttonDisabled=!1,t.getMenusList(),t.dialogVisible=!1}))})},menusEdit:function(){var t=this;this.$http.post("/menus/edit",this.$qs.stringify(this.formData)).then(function(e){t.dialogVisible=!1,t.getMenusList()})},delete:function(t){var e=this;this.$http.get("/menus/delete?id="+t).then(function(t){e.getMenusList()})},select:function(t){var e=this;switch(t.type){case"add":this.btnStatus=!0,this.formData.pid=t.id,this.dialogVisible=!0,this.dialogTitle="添加下级菜单";break;case"edit":this.btnStatus=!1,this.dialogVisible=!0,this.dialogTitle="编辑",this.formData.text=t.row.text,this.formData.icon=t.row.icon,this.formData.url=t.row.url,this.$set(this.formData,"id",t.id);break;case"delete":this.$confirm("是否继续?","提示",{type:"warning"}).then(function(){e.delete(t.id)}).catch(function(){console.log("no")})}}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"menus"}},[n("el-card",{attrs:{"body-style":{padding:"0px"}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("菜单管理")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.btnStatus=!0,t.dialogVisible=!0,t.dialogTitle="添加"}}},[t._v("添加顶级菜单")])],1),t._v(" "),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],attrs:{"default-expand-all":!0,data:t.menusList,props:{children:"children",label:"text"}},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.data;return n("div",{staticStyle:{width:"100%"}},[n("i",{class:o.icon}),t._v(" "+t._s(o.text)+"\n        "),n("div",{staticStyle:{display:"inline"},on:{click:function(t){t.stopPropagation()}}},[n("el-tooltip",{attrs:{content:1==o.status?"当前显示":"当前隐藏",placement:"top",effect:"light"}},[n("el-switch",{attrs:{"active-color":"#9BCBFC","active-value":1,"inactive-value":0,width:30},on:{change:function(e){t.setStatus(o)}},model:{value:o.status,callback:function(e){t.$set(o,"status",e)},expression:"data.status"}})],1),t._v(" "),n("el-dropdown",{on:{command:t.select}},[n("el-button",{attrs:{size:"mini",round:""}},[t._v("操作")]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{type:"add",id:o.id}}},[t._v("\n                添加下级菜单\n              ")]),t._v(" "),0==o.children.length?n("el-dropdown-item",{attrs:{command:{type:"delete",id:o.id}}},[t._v("\n                删除\n              ")]):t._e(),t._v(" "),n("el-dropdown-item",{attrs:{command:{type:"edit",id:o.id,row:o}}},[t._v("\n                编辑\n              ")])],1)],1),t._v(" "),n("el-button-group",[n("el-button",{attrs:{type:"default",size:"mini",circle:"",icon:"el-icon-arrow-up"},on:{click:function(e){t.sort(o.id,"up",o.sort)}}}),t._v(" "),n("el-button",{attrs:{type:"default",size:"mini",circle:"",icon:"el-icon-arrow-down"},on:{click:function(e){t.sort(o.id,"down",o.sort)}}})],1)],1)])}}])})],1),t._v(" "),n("el-dialog",{attrs:{width:"400px",title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[n("el-form",{ref:"formData",attrs:{"label-position":"left",model:t.formData,rules:t.rules,"label-width":"60px"}},[n("el-form-item",{attrs:{label:"名称",prop:"text"}},[n("el-input",{model:{value:t.formData.text,callback:function(e){t.$set(t.formData,"text",e)},expression:"formData.text"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"URL",prop:"url"}},[n("el-input",{model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"ICON",prop:"icon"}},[n("el-select",{model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}},[n("el-option",{attrs:{label:"无",value:""}}),t._v(" "),t._l(t.icons,function(e){return n("el-option",{key:"icon"+e,attrs:{value:e}},[n("i",{class:e}),t._v(" "),n("span",[t._v(t._s(e))])])})],2),t._v(" "),n("i",{class:t.formData.icon})],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnStatus,expression:"btnStatus"}],attrs:{icon:t.buttonOkIcon,disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusAdd}},[t._v("确 定（add）")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.btnStatus,expression:"!btnStatus"}],attrs:{icon:t.buttonOkIcon,disabled:t.buttonDisabled,type:"primary"},on:{click:t.menusEdit}},[t._v("确 定(edit)")])],1)],1)],1)},staticRenderFns:[]};var g=n("VU/8")(f,h,!1,function(t){n("Kuv3")},null,null).exports,v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"users"}},[n("el-table",{attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"username",label:"用户名",width:80}}),t._v(" "),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"手机"}}),t._v(" "),n("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row,n("div",{},[n("el-button-group",[n("el-button",{attrs:{type:"default",round:"",size:"mini"}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"default",round:"",size:"mini"}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{type:"default",round:"",size:"mini"}},[t._v("重置密码")])],1)],1)}}])})],1),t._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-pagination",{attrs:{"current-page":t.currentpage,"page-size":t.pagesize,total:t.total,background:"",layout:" prev, pager, next"},on:{"update:currentPage":function(e){t.currentpage=e},"current-change":t.getUsersList}})],1)],1)},staticRenderFns:[]},b=n("VU/8")({data:function(){return{tableData:[],total:0,pagesize:4,currentpage:1}},created:function(){this.getUsersList()},methods:{getUsersList:function(){var t=this;this.$http.get("/users/list?pagesize="+this.pagesize+"&currentpage="+this.currentpage).then(function(e){t.total=e.data.total,t.tableData=e.data.data})}}},v,!1,null,null,null).exports;o.default.use(r.a);var _=new r.a({routes:[{path:"/",redirect:"/index/users"},{path:"/index",name:"index",redirect:"/index/users",component:l,children:[{path:"menus",component:g},{path:"users",component:b},{path:"outlines",component:{template:"<div>outlines</div>"}}]},{path:"/login",name:"login",component:u},{path:"/regist",name:"regist",component:m}]}),w=n("zL8q"),L=n.n(w),D=(n("tvR6"),n("mtWM")),$=n.n(D),x=n("7t+N"),y=n.n(x),k=n("mw3O"),E=n.n(k);function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.forEach(function(o){o.pid===e&&(o.children=[],n.push(o),S(t,o.id,o.children))}),n}$.a.defaults.baseURL="http://127.0.0.1:3000",$.a.defaults.withCredentials=!0;var z={install:function(t,e){t.prototype.apiUrl="http://127.0.0.1:3000",t.prototype.$http=$.a,t.prototype.jq=y.a,t.prototype.$qs=E.a,t.prototype.$tree=S}};o.default.use(z),o.default.use(L.a),new o.default({el:"#app",router:_,components:{App:a},template:"<App/>"})},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.96c2d0c2ad39b244d4be.js.map